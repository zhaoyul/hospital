<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>患者列表 - 门诊手术麻醉评估系统</title>
    <!-- Ant Design CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.16.13/antd.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            overflow-x: hidden;
        }
        
        /* 系统整体布局 */
        .system-layout {
            display: flex;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }
        
        /* 侧边导航栏 */
        .ant-layout-sider {
            background: #fff;
            border-right: 1px solid #f0f0f0;
            position: relative;
            transition: all 0.3s;
            z-index: 10;
            margin: 0;
            padding: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .ant-layout-sider.collapsed {
            width: 80px !important;
            min-width: 80px !important;
            max-width: 80px !important;
            flex: 0 0 80px !important;
        }
        
        .ant-layout-sider.expanded {
            width: 200px !important;
            min-width: 200px !important;
            max-width: 200px !important;
            flex: 0 0 200px !important;
        }
        
        .toggle-btn {
            position: absolute;
            right: -12px;
            top: 72px;
            width: 24px;
            height: 24px;
            background: #fff;
            color: #1890ff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            z-index: 1;
        }
        
        .ant-menu {
            border-right: none;
        }
        
        .ant-menu-item {
            display: flex;
            align-items: center;
            height: 50px;
            margin: 4px 0;
            padding: 0 16px;
            overflow: hidden;
        }
        
        .ant-menu-item.collapsed {
            flex-direction: column;
            justify-content: center;
            height: 70px;
            padding-top: 15px;
        }
        
        .sidebar-icon {
            font-size: 20px;
            margin-right: 10px;
        }
        
        .ant-menu-item.collapsed .sidebar-icon {
            margin-right: 0;
            margin-bottom: 4px;
        }
        
        .sidebar-text {
            font-size: 14px;
            white-space: nowrap;
            opacity: 1;
            transition: opacity 0.3s;
        }
        
        .ant-menu-item.collapsed .sidebar-text {
            font-size: 12px;
        }
        
        .ant-menu-item-selected {
            background-color: #e6f7ff;
        }
        
        .ant-menu-item:hover {
            background-color: #f5f5f5;
        }
        
        /* 主内容区域 */
        .ant-layout {
            background: #f0f2f5;
            margin-left: 0;
        }
        
        /* 顶部导航栏 */
        .ant-layout-header {
            background: #fff;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 64px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        }
        
        .system-title {
            display: flex;
            align-items: center;
        }
        
        .logo-icon {
            font-size: 24px;
            margin-right: 10px;
            color: #1890ff;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            cursor: pointer;
            position: relative;
        }
        
        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 160px;
            background-color: #fff;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            display: none;
            z-index: 1000;
            overflow: hidden;
        }
        
        .user-dropdown.show {
            display: block;
        }
        
        .user-dropdown-item {
            padding: 8px 16px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }
        
        .user-dropdown-item:hover {
            background-color: #f5f5f5;
        }
        
        .user-dropdown-item i {
            margin-right: 8px;
            width: 16px;
            text-align: center;
        }
        
        .location-tag {
            background-color: #e6f7ff;
            color: #1890ff;
            border-radius: 4px;
            padding: 2px 8px;
            font-size: 12px;
            margin-right: 8px;
        }
        
        .ant-avatar {
            margin-right: 8px;
        }
        
        /* 内容区布局 */
        .ant-layout-content {
            margin: 16px;
            display: flex;
            overflow: hidden;
            height: calc(100vh - 96px);
        }
        
        /* 患者列表部分 */
        .patient-list-container {
            width: 320px;
            background: #fff;
            border-radius: 4px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            margin-right: 16px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        }
        
        .patient-list-header {
            padding: 16px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .search-input {
            margin-bottom: 16px;
        }
        
        .filter-tabs {
            margin-bottom: 16px;
        }
        
        .patient-list {
            flex: 1;
            overflow-y: auto;
            padding: 0;
        }
        
        .patient-item {
            padding: 16px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .patient-item:hover {
            background: #f5f5f5;
        }
        
        .patient-item.active {
            background: #e6f7ff;
            border-left: 3px solid #1890ff;
        }
        
        .patient-name {
            font-weight: 500;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .patient-info {
            color: #666;
            font-size: 13px;
            margin-bottom: 4px;
        }
        
        .patient-date {
            color: #999;
            font-size: 12px;
        }
        
        /* 患者详情部分 */
        .patient-detail-container {
            flex: 1;
            background: #fff;
            border-radius: 4px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        }
        
        .detail-header {
            padding: 16px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .detail-title {
            font-size: 16px;
            font-weight: 500;
        }
        
        .detail-content {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }
        
        .ant-card {
            margin-bottom: 16px;
        }
        
        .ant-card-head {
            border-bottom: 1px solid #f0f0f0;
            min-height: auto;
        }
        
        .ant-card-head-title {
            padding: 12px 0;
        }
        
        .ant-form-item {
            margin-bottom: 16px;
        }
        
        .patient-info-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
        }
        
        .info-label {
            color: #999;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .info-value {
            font-weight: 500;
        }
        
        .save-button {
            margin-top: 16px;
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="system-layout">
        <!-- 侧边导航栏 -->
        <div class="ant-layout-sider collapsed" id="sideMenu">
            <div class="toggle-btn" id="toggleSidebar">
                <i class="fas fa-angle-right" id="toggleIcon"></i>
            </div>
            <div class="ant-menu ant-menu-root ant-menu-vertical">
                <div class="ant-menu-item ant-menu-item-selected collapsed">
                    <div class="sidebar-icon">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <div class="sidebar-text">麻醉管理</div>
                </div>
                
                <div class="ant-menu-item collapsed">
                    <div class="sidebar-icon">
                        <i class="fas fa-file-medical"></i>
                    </div>
                    <div class="sidebar-text">问卷列表</div>
                </div>
                
                <div class="ant-menu-item collapsed">
                    <div class="sidebar-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="sidebar-text">系统设置</div>
                </div>
            </div>
        </div>
        
        <!-- 主内容区域 -->
        <div class="ant-layout">
            <!-- 顶部导航栏 -->
            <div class="ant-layout-header">
                <div class="system-title">
                    <i class="fas fa-hospital-user logo-icon"></i>
                    <h1 style="margin: 0; font-size: 18px;">麻醉信息管理平台</h1>
                </div>
                <div class="user-info" id="userInfoDropdown">
                    <span class="ant-avatar ant-avatar-circle ant-avatar-icon" style="background-color: #1890ff; color: #fff;">
                        <i class="fas fa-user"></i>
                    </span>
                    <span class="location-tag">聊城市人民医院</span>
                    <span>张医生</span>
                    <i class="fas fa-chevron-down" style="margin-left: 8px; color: #999;"></i>
                    
                    <!-- 用户下拉菜单 -->
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-dropdown-item">
                            <i class="fas fa-user-circle"></i>
                            <span>个人信息</span>
                        </div>
                        <div class="user-dropdown-item">
                            <i class="fas fa-cog"></i>
                            <span>账号设置</span>
                        </div>
                        <div class="user-dropdown-item">
                            <i class="fas fa-bell"></i>
                            <span>消息通知</span>
                        </div>
                        <div class="user-dropdown-item" style="border-top: 1px solid #f0f0f0;">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>退出登录</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 内容区域 -->
            <div class="ant-layout-content">
                <!-- 左侧患者列表 -->
                <div class="patient-list-container">
                    <div class="patient-list-header">
                        <div style="margin-bottom: 16px;">
                            <!-- 功能按钮组 -->
                            <div style="display: flex; gap: 8px; margin-bottom: 16px;">
                                <button class="ant-btn ant-btn-primary" style="display: flex; align-items: center; padding: 0 12px;">
                                    <i class="fas fa-sync-alt" style="margin-right: 4px;"></i>
                                    <span>同步申请</span>
                                </button>
                                <button class="ant-btn" style="display: flex; align-items: center; padding: 0 12px;">
                                    <i class="fas fa-qrcode" style="margin-right: 4px;"></i>
                                    <span>扫码签到</span>
                                </button>
                            </div>

                            <!-- 日期范围选择器 -->
                            <div style="margin-bottom: 8px; color: #666;">申请日期:</div>
                            <div style="display: flex; align-items: center; margin-bottom: 12px;">
                                <div class="ant-picker" style="width: 135px;">
                                    <input type="text" placeholder="开始日期" readonly value="2023-05-06" class="ant-picker-input" style="width: 100%; border: none; outline: none;">
                                </div>
                                <span style="margin: 0 8px; color: #999;">~</span>
                                <div class="ant-picker" style="width: 135px;">
                                    <input type="text" placeholder="结束日期" readonly value="2023-05-06" class="ant-picker-input" style="width: 100%; border: none; outline: none;">
                                </div>
                            </div>
                        </div>
                        
                        <!-- 评估状态下拉框 -->
                        <div style="margin-bottom: 16px;">
                            <div class="ant-select ant-select-single" style="width: 100%;">
                                <div class="ant-select-selector" style="padding: 0 12px; height: 32px; line-height: 32px; border: 1px solid #d9d9d9; border-radius: 2px;">
                                    <span class="ant-select-selection-item">评估状态: 请选择</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 搜索框 -->
                        <div class="ant-input-affix-wrapper search-input">
                            <span class="ant-input-prefix">
                                <i class="fas fa-search" style="color: #999;"></i>
                            </span>
                            <input type="text" class="ant-input" placeholder="请输入患者姓名/门诊号">
                        </div>
                    </div>
                    
                    <!-- 患者列表 -->
                    <div class="patient-list">
                        <div class="patient-item active">
                            <div class="patient-name">
                                <span>彭先生</span>
                                <span class="ant-tag ant-tag-orange">待评估</span>
                            </div>
                            <div class="patient-info">01864297 | Inp01864297</div>
                            <div class="patient-info">男 | 98岁</div>
                            <div class="patient-info">静脉复合麻醉</div>
                            <div class="patient-date">2023-05-06</div>
                        </div>
                        
                        <div class="patient-item">
                            <div class="patient-name">
                                <span>徐女士</span>
                                <span class="ant-tag ant-tag-orange">待评估</span>
                            </div>
                            <div class="patient-info">01894365 | Inp01894365</div>
                            <div class="patient-info">女 | 70岁</div>
                            <div class="patient-info">气管插管全麻</div>
                            <div class="patient-date">2023-05-06</div>
                        </div>
                        
                        <div class="patient-item">
                            <div class="patient-name">
                                <span>张女士</span>
                                <span class="ant-tag ant-tag-orange">待评估</span>
                            </div>
                            <div class="patient-info">00542187 | Inp00542187</div>
                            <div class="patient-info">女 | 71岁</div>
                            <div class="patient-info">气管插管全麻</div>
                            <div class="patient-date">2023-05-06</div>
                        </div>
                        
                        <div class="patient-item">
                            <div class="patient-name">
                                <span>朱先生</span>
                                <span class="ant-tag ant-tag-orange">待评估</span>
                            </div>
                            <div class="patient-info">01875349 | Inp01875349</div>
                            <div class="patient-info">男 | 56岁</div>
                            <div class="patient-info">静脉复合麻醉</div>
                            <div class="patient-date">2023-05-06</div>
                        </div>
                        
                        <div class="patient-item">
                            <div class="patient-name">
                                <span>曹先生</span>
                                <span class="ant-tag ant-tag-orange">待评估</span>
                            </div>
                            <div class="patient-info">00512467 | Inp00512467</div>
                            <div class="patient-info">男 | 59岁</div>
                            <div class="patient-info">气管插管全麻</div>
                            <div class="patient-date">2023-05-06</div>
                        </div>
                        
                        <div class="patient-item">
                            <div class="patient-name">
                                <span>陈女士</span>
                                <span class="ant-tag ant-tag-orange">待评估</span>
                            </div>
                            <div class="patient-info">01876539 | Inp01876539</div>
                            <div class="patient-info">女 | 70岁</div>
                            <div class="patient-info">静脉复合麻醉</div>
                            <div class="patient-date">2023-05-06</div>
                        </div>
                    </div>
                </div>
                
                <!-- 右侧患者详情 -->
                <div class="patient-detail-container">
                    <div class="detail-header">
                        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                            <div class="detail-title">
                                <h2 style="margin: 4px 0 0; font-weight: bold;">麻醉术前评估报告</h2>
                            </div>
                            
                            <div class="operation-buttons" style="display: flex; gap: 8px;">
                                <button class="ant-btn ant-btn-success" style="background: #52c41a; border-color: #52c41a; color: #fff;">
                                    <i class="fas fa-check-circle" style="margin-right: 4px;"></i> 批准
                                </button>
                                <button class="ant-btn ant-btn-warning" style="background: #faad14; border-color: #faad14; color: #fff;">
                                    <i class="fas fa-clock" style="margin-right: 4px;"></i> 暂缓
                                </button>
                                <button class="ant-btn ant-btn-danger" style="background: #ff4d4f; border-color: #ff4d4f; color: #fff;">
                                    <i class="fas fa-times-circle" style="margin-right: 4px;"></i> 驳回
                                </button>
                                <!-- 打印报告单按钮，仅在已批准状态显示 -->
                                <button id="printReportBtn" class="ant-btn" style="background: #1890ff; border-color: #1890ff; color: #fff; display: none;">
                                    <i class="fas fa-print" style="margin-right: 4px;"></i> 打印报告单
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-content">
                        <form class="ant-form ant-form-vertical">
                            <!-- 一、项目详细信息 -->
                            <div class="ant-card ant-card-bordered">
                                <div class="ant-card-head" style="background-color: #f0f7ff;">
                                    <div class="ant-card-head-title" style="font-size: 16px; font-weight: bold;">
                                        <i class="fas fa-user-circle" style="margin-right: 6px;"></i>项目详细信息
                                    </div>
                                </div>
                                <div class="ant-card-body" style="padding: 12px;">
                                    <table class="ant-table" style="width: 100%; border-collapse: collapse;">
                                        <tbody>
                                            <tr>
                                                <td>门诊号</td>
                                                <td><input class="ant-input" type="text" required></td>
                                                <td>姓名</td>
                                                <td><input class="ant-input" type="text" required></td>
                                                <td>性别</td>
                                                <td><input class="ant-input" type="text" required></td>
                                                <td>年龄</td>
                                                <td><input class="ant-input" type="text" required></td>
                                            </tr>
                                            <tr>
                                                <td>病区</td>
                                                <td colspan="3"><input class="ant-input" type="text" required></td>
                                                <td>电子健康卡号</td>
                                                <td colspan="3"><input class="ant-input" type="text" required></td>
                                            </tr>
                                            <tr>
                                                <td>术前诊断</td>
                                                <td colspan="7"><input class="ant-input" type="text" required></td>
                                            </tr>
                                            <tr>
                                                <td>拟施手术</td>
                                                <td colspan="7"><input class="ant-input" type="text" required></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- 二、一般情况 -->
                            <div class="ant-card ant-card-bordered" style="margin-top: 8px;">
                                <div class="ant-card-head" style="background-color: #f6ffed;">
                                    <div class="ant-card-head-title" style="font-size: 16px; font-weight: bold;">
                                        <i class="fas fa-heartbeat" style="margin-right: 6px;"></i>一般情况
                                    </div>
                                </div>
                                <div class="ant-card-body" style="padding: 12px;">
                                    <div style="display: flex; flex-wrap: wrap; gap: 16px;">
                                        <div>身高（cm）：<input class="ant-input" type="number" required style="width: 80px;"></div>
                                        <div>体重（kg）：<input class="ant-input" type="number" required style="width: 80px;"></div>
                                        <div>精神状态：<input class="ant-input" type="text" required style="width: 120px;"></div>
                                        <div>活动能力：<input class="ant-input" type="text" required style="width: 120px;"></div>
                                    </div>
                                    <div style="margin-top: 12px; display: flex; flex-wrap: wrap; gap: 16px;">
                                        <div>血压（mmHg）：<input class="ant-input" type="text" required style="width: 100px;"></div>
                                        <div>脉搏（次/分）：<input class="ant-input" type="number" required style="width: 80px;"></div>
                                        <div>呼吸（次/分）：<input class="ant-input" type="number" required style="width: 80px;"></div>
                                        <div>体温（℃）：<input class="ant-input" type="number" required style="width: 80px;"></div>
                                        <div>SpO2（%）：<input class="ant-input" type="number" required style="width: 80px;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- 三、病情摘要 -->
                            <div class="ant-card ant-card-bordered" style="margin-top: 8px;">
                                <div class="ant-card-head" style="background-color: #fff7e6;">
                                    <div class="ant-card-head-title" style="font-size: 16px; font-weight: bold;">
                                        <i class="fas fa-file-medical-alt" style="margin-right: 6px;"></i>病情摘要
                                    </div>
                                </div>
                                <div class="ant-card-body" style="padding: 12px;">
                                    <div style="margin-bottom: 8px;">
                                        <span>过敏史：</span>
                                        <label><input type="radio" name="allergy" value="无" required>无</label>
                                        <label style="margin-left: 8px;"><input type="radio" name="allergy" value="有" required>有</label>
                                        <span style="margin-left: 8px;">过敏源头：</span>
                                        <input class="ant-input" type="text" style="width: 120px;" required>
                                        <span style="margin-left: 8px;">最近发生过敏时间：</span>
                                        <input class="ant-input" type="date" style="width: 160px;" required>
                                    </div>
                                    <div style="margin-bottom: 8px;">
                                        <span>吸烟史：</span>
                                        <label><input type="radio" name="smoking" value="无" required>无</label>
                                        <label style="margin-left: 8px;"><input type="radio" name="smoking" value="有" required>有</label>
                                        <span style="margin-left: 8px;">吸烟年数：</span>
                                        <input class="ant-input" type="number" style="width: 60px;" required>
                                        <span>年</span>
                                        <span style="margin-left: 8px;">每天吸烟支数：</span>
                                        <input class="ant-input" type="number" style="width: 60px;" required>
                                        <span>支</span>
                                    </div>
                                    <div>
                                        <span>饮酒史：</span>
                                        <label><input type="radio" name="drinking" value="无" required>无</label>
                                        <label style="margin-left: 8px;"><input type="radio" name="drinking" value="有" required>有</label>
                                        <span style="margin-left: 8px;">饮酒年数：</span>
                                        <input class="ant-input" type="number" style="width: 60px;" required>
                                        <span>年</span>
                                        <span style="margin-left: 8px;">每天饮酒量：</span>
                                        <input class="ant-input" type="number" style="width: 60px;" required>
                                        <span>ml</span>
                                    </div>
                                </div>
                            </div>

                            <!-- 四、并存疾病 -->
                            <div class="ant-card ant-card-bordered" style="margin-top: 8px;">
                                <div class="ant-card-head" style="background-color: #f9f0ff;">
                                    <div class="ant-card-head-title" style="font-size: 16px; font-weight: bold;">
                                        <i class="fas fa-stethoscope" style="margin-right: 6px;"></i>并存疾病
                                    </div>
                                </div>
                                <div class="ant-card-body" style="padding: 12px;">
                                    <table class="ant-table" style="width: 100%; border-collapse: separate; border-spacing: 0 10px;">
                                        <tbody>
                                            <tr>
                                                <td style="width: 10%;">呼吸系统疾病</td>
                                                <td style="width: 40%;">
                                                    <label><input type="radio" name="respiratoryDiseaseOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="respiratoryDiseaseOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                                <td style="width: 10%;">心血管疾病</td>
                                                <td style="width: 40%;">
                                                    <label><input type="radio" name="cardiovascularDiseaseOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="cardiovascularDiseaseOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>内分泌疾病</td>
                                                <td>
                                                    <label><input type="radio" name="endocrineDiseaseOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="endocrineDiseaseOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                                <td>神经精神疾病</td>
                                                <td>
                                                    <label><input type="radio" name="neuropsychiatricDiseaseOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="neuropsychiatricDiseaseOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>神经肌肉疾病</td>
                                                <td>
                                                    <label><input type="radio" name="neuromuscularDiseaseOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="neuromuscularDiseaseOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                                <td>肝脏疾病</td>
                                                <td>
                                                    <label><input type="radio" name="liverDiseaseOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="liverDiseaseOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>肾脏疾病</td>
                                                <td>
                                                    <label><input type="radio" name="renalDiseaseOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="renalDiseaseOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                                <td>关节骨骼系统</td>
                                                <td>
                                                    <label><input type="radio" name="musculoskeletalDiseaseOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="musculoskeletalDiseaseOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>家族恶性高热史</td>
                                                <td>
                                                    <label><input type="radio" name="malignantHyperthermiaOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="malignantHyperthermiaOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                                <td>既往麻醉、手术史</td>
                                                <td>
                                                    <label><input type="radio" name="anesthesiaHistoryOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="anesthesiaHistoryOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>使用的特殊药物</td>
                                                <td colspan="3">
                                                    <label><input type="radio" name="specialDrugsOption" value="有">有</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="specialDrugsOption" value="无" checked>无</label>
                                                    <input class="ant-input comorbidity-input" type="text" style="margin-left:8px; display:none; width:70%; vertical-align:middle;" placeholder="请填写具体内容">
                                                </td>
                                            </tr>
                                            <tr id="lastMedicationTimeRow" style="display:none;">
                                                <td>最后一次用药时间</td>
                                                <td colspan="3"><input class="ant-input" type="datetime-local" style="width: 250px;"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <script>
                            // 控制并存疾病输入框显示/隐藏
                            (function() {
                                function toggleComorbidityInput(radio) {
                                    var input = radio.closest('td').querySelector('.comorbidity-input');
                                    if (!input) return;
                                    if (radio.value === '有') {
                                        input.style.display = '';
                                    } else {
                                        input.style.display = 'none';
                                        input.value = '';
                                    }
                                }
                                document.querySelectorAll('.ant-card-head-title').forEach(function(cardTitle) {
                                    if(cardTitle.textContent.indexOf('并存疾病') === -1) return;
                                    var card = cardTitle.closest('.ant-card');
                                    card.querySelectorAll('input[type=radio]').forEach(function(radio) {
                                        radio.addEventListener('change', function() {
                                            toggleComorbidityInput(this);
                                        });
                                        // 初始化
                                        if (radio.checked) {
                                            toggleComorbidityInput(radio);
                                        }
                                    });
                                });
                            })();

                            // 特殊药物用药时间显示逻辑
                            (function() {
                                var specialDrugsRadios = document.getElementsByName('specialDrugsOption');
                                var lastMedicationTimeRow = document.getElementById('lastMedicationTimeRow');
                                specialDrugsRadios.forEach(function(radio) {
                                    radio.addEventListener('change', function() {
                                        if (this.value === '有' && this.checked) {
                                            lastMedicationTimeRow.style.display = '';
                                        } else if (this.value === '无' && this.checked) {
                                            lastMedicationTimeRow.style.display = 'none';
                                        }
                                    });
                                    // 初始化
                                    if (radio.checked && radio.value === '有') {
                                        lastMedicationTimeRow.style.display = '';
                                    }
                                });
                            })();
                            </script>

                            <!-- 五、体格检查 -->
                            <div class="ant-card ant-card-bordered" style="margin-top: 8px;">
                                <div class="ant-card-head" style="background-color: #e6f7ff;">
                                    <div class="ant-card-head-title" style="font-size: 16px; font-weight: bold;">
                                        <i class="fas fa-user-md" style="margin-right: 6px;"></i>体格检查
                                    </div>
                                </div>
                                <div class="ant-card-body" style="padding: 12px;">
                                    <table class="ant-table" style="width: 100%; border-collapse: collapse;">
                                        <tbody>
                                            <tr>
                                                <td>心脏</td>
                                                <td>
                                                    <label><input type="radio" name="heart_status" value="normal" checked> 正常</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="heart_status" value="abnormal"> 异常</label>
                                                    <input class="ant-input" type="text" id="heart_abnormal" style="display:none;margin-top:6px;" placeholder="请补充异常描述">
                                                </td>
                                                <td>肺脏</td>
                                                <td>
                                                    <label><input type="radio" name="lung_status" value="normal" checked> 正常</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="lung_status" value="abnormal"> 异常</label>
                                                    <input class="ant-input" type="text" id="lung_abnormal" style="display:none;margin-top:6px;" placeholder="请补充异常描述">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>气道</td>
                                                <td>
                                                    <label><input type="radio" name="airway_status" value="normal" checked> 正常</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="airway_status" value="abnormal"> 异常</label>
                                                    <input class="ant-input" type="text" id="airway_abnormal" style="display:none;margin-top:6px;" placeholder="请补充异常描述">
                                                </td>
                                                <td>牙齿</td>
                                                <td>
                                                    <label><input type="radio" name="teeth_status" value="normal" checked> 正常</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="teeth_status" value="abnormal"> 异常</label>
                                                    <input class="ant-input" type="text" id="teeth_abnormal" style="display:none;margin-top:6px;" placeholder="请补充异常描述">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>脊柱四肢</td>
                                                <td>
                                                    <label><input type="radio" name="spine_status" value="normal" checked> 正常</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="spine_status" value="abnormal"> 异常</label>
                                                    <input class="ant-input" type="text" id="spine_abnormal" style="display:none;margin-top:6px;" placeholder="请补充异常描述">
                                                </td>
                                                <td>其它</td>
                                                <td><input class="ant-input" type="text"></td>
                                            </tr>
                                            <tr>
                                                <td>神经</td>
                                                <td>
                                                    <label><input type="radio" name="nerve_status" value="normal" checked> 正常</label>
                                                    <label style="margin-left:8px;"><input type="radio" name="nerve_status" value="abnormal"> 异常</label>
                                                    <input class="ant-input" type="text" id="nerve_abnormal" style="display:none;margin-top:6px;" placeholder="请补充异常描述">
                                                </td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <script>
                            // 体格检查异常项显示逻辑
                            (function() {
                                const items = [
                                    {name: 'heart', input: 'heart_abnormal'},
                                    {name: 'lung', input: 'lung_abnormal'},
                                    {name: 'airway', input: 'airway_abnormal'},
                                    {name: 'teeth', input: 'teeth_abnormal'},
                                    {name: 'spine', input: 'spine_abnormal'},
                                    {name: 'nerve', input: 'nerve_abnormal'}
                                ];
                                items.forEach(item => {
                                    const radios = document.getElementsByName(item.name + '_status');
                                    const input = document.getElementById(item.input);
                                    radios.forEach(radio => {
                                        radio.addEventListener('change', function() {
                                            if (this.value === 'abnormal' && this.checked) {
                                                input.style.display = '';
                                            } else if (this.value === 'normal' && this.checked) {
                                                input.style.display = 'none';
                                                input.value = '';
                                            }
                                        });
                                        // 初始化
                                        if (radio.checked && radio.value === 'abnormal') {
                                            input.style.display = '';
                                        }
                                    });
                                });
                            })();
                            </script>

                            <!-- 六、相关辅助检查检验结果 -->
                            <div class="ant-card ant-card-bordered" style="margin-top: 8px;">
                                <div class="ant-card-head" style="background-color: #fffbe6;">
                                    <div class="ant-card-head-title" style="font-size: 16px; font-weight: bold;">
                                        <i class="fas fa-vials" style="margin-right: 6px;"></i>相关辅助检查检验结果
                                    </div>
                                </div>
                                <div class="ant-card-body" style="padding: 12px;">
                                    <div style="display: flex; flex-wrap: wrap; gap: 16px;">
                                        <div>胸片：<input class="ant-input" type="text" required style="width: 120px;">
                                            <input type="file" accept=".jpg,.jpeg,.png,.pdf" style="margin-left:8px;" onchange="showFileName(this, 'chest_xray_file')">
                                            <span id="chest_xray_file" style="font-size:12px;color:#888;margin-left:4px;"></span>
                                        </div>
                                        <div>肺功能：<input class="ant-input" type="text" required style="width: 120px;">
                                            <input type="file" accept=".jpg,.jpeg,.png,.pdf" style="margin-left:8px;" onchange="showFileName(this, 'lung_function_file')">
                                            <span id="lung_function_file" style="font-size:12px;color:#888;margin-left:4px;"></span>
                                        </div>
                                        <div>心脏彩超：<input class="ant-input" type="text" required style="width: 120px;">
                                            <input type="file" accept=".jpg,.jpeg,.png,.pdf" style="margin-left:8px;" onchange="showFileName(this, 'echo_file')">
                                            <span id="echo_file" style="font-size:12px;color:#888;margin-left:4px;"></span>
                                        </div>
                                        <div>心电图：<input class="ant-input" type="text" required style="width: 120px;">
                                            <input type="file" accept=".jpg,.jpeg,.png,.pdf" style="margin-left:8px;" onchange="showFileName(this, 'ecg_file')">
                                            <span id="ecg_file" style="font-size:12px;color:#888;margin-left:4px;"></span>
                                        </div>
                                    </div>
                                    <div style="margin-top: 16px;">
                                        <div>其他：<input class="ant-input" type="text" style="width: 120px;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- 七、麻醉评估与医嘱 -->
                            <div class="ant-card ant-card-bordered" style="margin-top: 8px;">
                                <div class="ant-card-head" style="background-color: #e6fffb;">
                                    <div class="ant-card-head-title" style="font-size: 16px; font-weight: bold;">
                                        <i class="fas fa-prescription" style="margin-right: 6px;"></i>麻醉评估与医嘱
                                    </div>
                                </div>
                                <div class="ant-card-body" style="padding: 12px;">
                                    <table class="ant-table" style="width: 100%; border-collapse: collapse;">
                                        <tbody>
                                            <tr>
                                                <td>ASA分级</td>
                                                <td><input class="ant-input" type="text" required></td>
                                                <td>心功能分级(NYHA)</td>
                                                <td><input class="ant-input" type="text" required></td>
                                            </tr>
                                            <tr>
                                                <td>拟行麻醉方式</td>
                                                <td><input class="ant-input" type="text" required></td>
                                                <td>监测项目</td>
                                                <td><input class="ant-input" type="text" required></td>
                                            </tr>
                                            <tr>
                                                <td>特殊技术</td>
                                                <td><input class="ant-input" type="text" required></td>
                                                <td>其他</td>
                                                <td><input class="ant-input" type="text"></td>
                                            </tr>
                                            <tr>
                                                <td>术前麻醉医嘱</td>
                                                <td><input class="ant-input" type="text" required></td>
                                                <td>术日晨继续应用药物</td>
                                                <td><input class="ant-input" type="text" required></td>
                                            </tr>
                                            <tr>
                                                <td>术日晨停用药物</td>
                                                <td><input class="ant-input" type="text" required></td>
                                                <td>麻醉前用药</td>
                                                <td><input class="ant-input" type="text" required></td>
                                            </tr>
                                            <tr>
                                                <td>麻醉中需注意的问题</td>
                                                <td colspan="3"><input class="ant-input" type="text" required></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- 八、签名与时间 -->
                            <div class="ant-card ant-card-bordered" style="margin-top: 8px;">
                                <div class="ant-card-body" style="padding: 12px; display: flex; justify-content: space-between;">
                                    <div style="display: flex; align-items: center;">
                                        <span>麻醉医师签名：</span>
                                        <input class="ant-input" type="text" style="width: 120px;" required>
                                    </div>
                                    <div style="display: flex; align-items: center;">
                                        <span>评估日期时间：</span>
                                        <input class="ant-input" type="datetime-local" style="width: 200px;" required>
                                    </div>
                                </div>
                            </div>

                            <!-- 备注部分 -->
                            <div class="ant-card ant-card-bordered" style="margin-top: 8px;">
                                <div class="ant-card-body" style="padding: 12px;">
                                    <textarea class="ant-input" rows="3" placeholder="备注信息" style="resize: none;"></textarea>
                                </div>
                            </div>

                            <!-- 保存按钮 -->
                            <div class="ant-card ant-card-bordered" style="margin-top: 8px;">
                                <div class="ant-card-body" style="padding: 12px; text-align: center;">
                                    <button class="ant-btn ant-btn-primary" onclick="saveForm()">
                                        <i class="fas fa-save" style="margin-right: 4px;"></i>保存
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ant Design JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script>
        // 侧边栏展开/收起功能
        document.addEventListener('DOMContentLoaded', function() {
            const sideMenu = document.getElementById('sideMenu');
            const toggleBtn = document.getElementById('toggleSidebar');
            const toggleIcon = document.getElementById('toggleIcon');
            const menuItems = document.querySelectorAll('.ant-menu-item');
            
            toggleBtn.addEventListener('click', function() {
                // 切换侧边栏展开/收起状态
                if (sideMenu.classList.contains('collapsed')) {
                    // 展开侧边栏
                    sideMenu.classList.remove('collapsed');
                    sideMenu.classList.add('expanded');
                    toggleIcon.classList.remove('fa-angle-right');
                    toggleIcon.classList.add('fa-angle-left');
                    
                    // 更新菜单项样式
                    menuItems.forEach(item => {
                        item.classList.remove('collapsed');
                    });
                } else {
                    // 收起侧边栏
                    sideMenu.classList.remove('expanded');
                    sideMenu.classList.add('collapsed');
                    toggleIcon.classList.remove('fa-angle-left');
                    toggleIcon.classList.add('fa-angle-right');
                    
                    // 更新菜单项样式
                    menuItems.forEach(item => {
                        item.classList.add('collapsed');
                    });
                }
            });
            
            // 用户下拉菜单功能
            const userInfoDropdown = document.getElementById('userInfoDropdown');
            const userDropdown = document.getElementById('userDropdown');
            
            userInfoDropdown.addEventListener('click', function(e) {
                userDropdown.classList.toggle('show');
                e.stopPropagation();
            });
            
            // 点击页面其他位置关闭下拉菜单
            document.addEventListener('click', function() {
                userDropdown.classList.remove('show');
            });
            
            // 下拉菜单项点击事件
            const dropdownItems = document.querySelectorAll('.user-dropdown-item');
            dropdownItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    const itemText = this.querySelector('span').textContent;
                    if (itemText === '退出登录') {
                        alert('您已退出登录');
                        // 实际应用中这里应该跳转到登录页面
                        // window.location.href = 'login.html';
                    } else {
                        alert(`您点击了：${itemText}`);
                    }
                    e.stopPropagation();
                });
            });
            
            // 同步按钮点击事件
            const syncButton = document.querySelector('.ant-btn-primary');
            if (syncButton) {
                syncButton.addEventListener('click', function() {
                    alert('正在从HIS系统同步患者列表数据...');
                    // 在实际应用中，这里会调用API获取最新的患者列表数据
                });
            }
            
            // 扫码按钮点击事件
            const scanButton = document.querySelector('.ant-btn .fa-qrcode').closest('.ant-btn');
            if (scanButton) {
                scanButton.addEventListener('click', function() {
                    alert('请将患者二维码对准扫描设备');
                    // 在实际应用中，这里会调用扫码设备API
                });
            }
        });
        
        // 侧边栏菜单项切换
        document.querySelectorAll('.ant-menu-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.ant-menu-item').forEach(i => {
                    i.classList.remove('ant-menu-item-selected');
                });
                this.classList.add('ant-menu-item-selected');
            });
        });
        
        // 患者列表项切换
        document.querySelectorAll('.patient-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.patient-item').forEach(i => {
                    i.classList.remove('active');
                });
                this.classList.add('active');
                
                // 在实际应用中，这里可以加载对应患者的详细信息
                // 模拟加载患者数据的函数
                const patientName = this.querySelector('.patient-name span').textContent;
                document.querySelector('.detail-title').textContent = '门诊麻醉评估 - ' + patientName;
            });
        });
        
        // 选项卡切换
        document.querySelectorAll('.ant-tabs-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.ant-tabs-tab').forEach(t => {
                    t.classList.remove('ant-tabs-tab-active');
                });
                this.classList.add('ant-tabs-tab-active');
                
                // 在实际应用中，这里可以切换显示不同类型的患者列表
            });
        });
        
        // 操作按钮点击事件
        document.querySelectorAll('.operation-buttons .ant-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const buttonText = this.textContent.trim();
                if (buttonText.includes('批准')) {
                    alert('已批准该评估');
                } else if (buttonText.includes('暂缓')) {
                    alert('已暂缓该评估');
                } else if (buttonText.includes('驳回')) {
                    alert('已驳回该评估');
                }
            });
        });
        
        // 模拟日期选择器行为
        document.querySelectorAll('.ant-picker').forEach(picker => {
            picker.addEventListener('click', function() {
                alert('日期选择器已点击，实际应用中会显示日期选择面板');
            });
        });
        
        // 模拟下拉选择器行为
        document.querySelector('.ant-select').addEventListener('click', function() {
            alert('下拉选择器已点击，实际应用中会显示选项列表');
        });
        
        // 确保左侧患者列表和右侧详情内容可以独立滚动
        document.addEventListener('DOMContentLoaded', function() {
            const patientList = document.querySelector('.patient-list');
            const detailContent = document.querySelector('.detail-content');
            
            // 确保内容区域可以独立滚动
            patientList.style.overflowY = 'auto';
            detailContent.style.overflowY = 'auto';
            
            // 防止滚动事件冒泡
            patientList.addEventListener('wheel', function(e) {
                if (e.currentTarget.scrollHeight > e.currentTarget.clientHeight) {
                    e.stopPropagation();
                }
            });
            
            detailContent.addEventListener('wheel', function(e) {
                if (e.currentTarget.scrollHeight > e.currentTarget.clientHeight) {
                    e.stopPropagation();
                }
            });
        });

        function saveForm() {
            alert('保存成功！');
        }

        function showFileName(input, spanId) {
            var span = document.getElementById(spanId);
            if (input.files && input.files.length > 0) {
                span.textContent = input.files[0].name;
            } else {
                span.textContent = '';
            }
        }
    </script>
    <!-- 添加打印功能的JavaScript代码 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 模拟患者状态切换（实际应用中应该根据后端数据判断）
            const statusToggleBtn = document.querySelector('.ant-btn-success');
            const printReportBtn = document.getElementById('printReportBtn');
            
            // 模拟批准按钮点击事件
            statusToggleBtn.addEventListener('click', function() {
                // 显示打印报告单按钮
                printReportBtn.style.display = 'flex';
                
                // 这里可以添加状态变更的其他逻辑
                const statusTag = document.querySelector('.patient-item.active .ant-tag');
                if (statusTag) {
                    statusTag.className = 'ant-tag ant-tag-success';
                    statusTag.textContent = '已批准';
                }
            });
            
            // 打印报告单按钮点击事件
            printReportBtn.addEventListener('click', function() {
                const activePatient = document.querySelector('.patient-item.active');
                if (!activePatient) {
                    alert('请先选择一个患者。');
                    return;
                }

                const patientNameElement = activePatient.querySelector('.patient-name span');
                const patientName = patientNameElement ? patientNameElement.textContent.trim() : '';
                
                const patientInfos = activePatient.querySelectorAll('.patient-info');
                const patientIdText = patientInfos[0] ? patientInfos[0].textContent : '';
                const genderAgeText = patientInfos[1] ? patientInfos[1].textContent : '';

                const patientId = patientIdText ? patientIdText.split(' | ')[0].trim() : '';
                const genderAgeArray = genderAgeText ? genderAgeText.split(' | ') : ['', ''];
                const gender = genderAgeArray[0] ? genderAgeArray[0].trim() : '';
                const age = genderAgeArray[1] ? genderAgeArray[1].replace('岁', '').trim() : '';

                const patientData = {
                    id: patientId,
                    name: patientName,
                    gender: gender,
                    age: age
                };

                // 尝试从患者详情区域获取数据，假设其ID为 'detailContent'
                // 您可能需要根据实际的HTML结构调整选择器
                const detailContainer = document.getElementById('detailContent'); 

                function getValueFromDetail(key) {
                    let element;
                    if (detailContainer) {
                        // 优先尝试通过ID获取
                        element = detailContainer.querySelector(`#${key}`);
                        // 如果ID找不到，尝试通过name属性获取 (通常用于表单元素)
                        if (!element) element = detailContainer.querySelector(`[name="${key}"]`);
                        // 如果也找不到，尝试通过class获取 (作为备选)
                        if (!element) element = detailContainer.querySelector(`.${key}`);
                    }
                    
                    // 如果在detailContainer中找不到，尝试全局查找 (作为最后的备选方案)
                    if (!element) element = document.getElementById(key);
                    if (!element) element = document.querySelector(`[name="${key}"]`);
                    if (!element) element = document.querySelector(`.${key}`);

                    if (element) {
                        // 检查 input, select, textarea 的 value
                        if (element.value !== undefined && element.value !== null) {
                            return element.value.trim();
                        }
                        // 检查其他元素的 textContent
                        if (element.textContent !== undefined && element.textContent !== null) {
                            return element.textContent.trim();
                        }
                    }
                    return ''; // 如果找不到元素或元素没有值/文本内容，则返回空字符串
                }

                const fieldsToFetch = [
                    'ward', 'healthCardId', 'preoperativeDiagnosis', 'plannedOperation', 'height', 
                    'weight', 'mentalState', 'activityLevel', 'bloodPressure', 'pulse', 'respiration', 
                    'temperature', 'spo2', 'recentAllergy', 'allergyHistory', 'smokingHistoryText', 
                    'drinkingHistoryText', 'previousAnesthesiaSurgery', 'respiratoryDisease', 
                    'cardiovascularDisease', 'endocrineDisease', 'hepatobiliaryDisease', 
                    'neuropsychiatricDisease', 'renalDisease', 'familyMalignantHyperthermia', 
                    'otherDiseases', 'cardiopulmonaryExam', 'lungsExam', 'airwayExam', 'teethExam', 
                    'spineLimbsExam', 'neurologicalExam', 'chestExam', 'auxiliaryExamResults', 
                    'asaClassification', 'nyhaClassification', 'ecgResults', 'pulmonaryFunction', 
                    'plannedAnesthesiaMethod', 'monitoringItems', 'specialTechniques', 
                    'preoperativeAnesthesiaOrders', 'preoperativePreparation', 'preoperativeFasting', 
                    'morningMedicationOnSurgeryDay', 'highRiskFurtherExamination', 
                    'medicationToStopOnSurgeryDay', 'highRiskFurtherConsultation', 
                    'anesthesiaAttentionPoints', 'anesthetistSignature', 'assessmentDate'
                ];

                fieldsToFetch.forEach(field => {
                    patientData[field] = getValueFromDetail(field);
                });
                
                const urlParams = new URLSearchParams();
                for (const key in patientData) {
                    if (patientData.hasOwnProperty(key) && patientData[key] !== null && patientData[key] !== undefined) {
                        urlParams.set(key, patientData[key]);
                    }
                }
                
                const printUrl = `print_preview.html?${urlParams.toString()}`;
                window.open(printUrl, '_blank', 'width=1000,height=800,scrollbars=yes');
            });
        });
    </script>
</body>
</html>